<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Modern Web LaTeX IDE</title>
    <meta name="description" content="An advanced, modern web-based LaTeX editor with file uploading and persistent storage.">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <style>
        :root { --primary-color: #007bff; --secondary-color: #17a2b8; --dark-bg: #282c34; --light-bg: #f4f4f4; --border-color: #ddd; --danger-color: #dc3545; --success-color: #28a745; --help-color: #6c757d; }
        body, html { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--light-bg); height: 100%; display: flex; flex-direction: column; }
        .toolbar { display: flex; align-items: center; padding: 5px 15px; background-color: #fff; border-bottom: 1px solid var(--border-color); flex-shrink: 0; gap: 10px; flex-wrap: wrap; }
        .toolbar-group { display: flex; align-items: center; gap: 5px; }
        .toolbar-separator { width: 1px; height: 24px; background-color: var(--border-color); margin: 0 5px; }
        .toolbar button, .toolbar select { padding: 0; font-size: 14px; border: 1px solid var(--border-color); border-radius: 5px; background-color: #fff; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; height: 36px; color: #333; }
        .toolbar button { width: 38px; line-height: 36px; text-align: center; }
        .toolbar select { padding: 0 8px; }
        .toolbar button:hover { background-color: #f0f0f0; border-color: #bbb; }
        .toolbar .icon-label { font-size: 1.2em; color: #555; margin-right: 3px; cursor: help; }
        #compile-btn { width: auto; padding: 0 15px; background-color: var(--primary-color); color: white; font-weight: bold; border-color: var(--primary-color); }
        #compile-btn:hover { background-color: #0056b3; }
        #compile-btn:disabled { background-color: #aaa; border-color: #aaa; cursor: not-allowed; }
        #compile-btn .fas { margin-right: 8px; }
        #clear-cache-btn { color: var(--danger-color); }
        #clear-cache-btn:hover { background-color: var(--danger-color); color: white; }
        
        /* ƒê·∫©y n·ªôi dung ch√≠nh l√™n ƒë·ªÉ kh√¥ng b·ªã che b·ªüi footer */
        body {
            padding-bottom: 40px; 
        }

        .main-container { display: flex; flex-grow: 1; padding: 10px; gap: 10px; min-height: 0; }
        .editor-pane, .pdf-pane {
            flex: 1 1 50%;
            display: flex; flex-direction: column; background-color: white; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden;
        }
        #editor { flex: 1; width: 100%; }
        .controls { padding: 10px; background-color: #f9f9f9; border-top: 1px solid var(--border-color); flex-shrink: 0; }
        .console-header { cursor: pointer; user-select: none; padding: 5px 8px; background-color: #e0e0e0; border-radius: 4px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .console-header:hover { background-color: #d0d0d0; }
        pre#console { white-space: pre-wrap; max-height: 150px; overflow-y: scroll; background-color: var(--dark-bg); color: #abb2bf; padding: 8px; border-radius: 4px; font-size: 13px; margin-top: 5px; }
        pre#console.collapsed { display: none; }
        #pdfbox { height: 100%; width: 100%; }
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 9999; display: none; justify-content: center; align-items: center; color: white; flex-direction: column; font-size: 1.5em; }
        .spinner { border: 8px solid #f3f3f3; border-top: 8px solid var(--primary-color); border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .swal2-html-container { text-align: left !important; }
        .swal2-html-container h3 { color: var(--primary-color); margin-top: 20px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .swal2-html-container code { background-color: #e8e8e8; padding: 2px 5px; border-radius: 4px; font-family: 'Courier New', Courier, monospace; }
        .swal2-html-container ul { padding-left: 20px; }
        .swal2-html-container .fa, .swal2-html-container .fas { width: 20px; text-align: center; margin-right: 5px; }
        #file-manager-container { max-height: 400px; overflow-y: auto; margin-top: 15px; border: 1px solid #eee; padding: 10px; border-radius: 5px; }
        .file-manager-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 5px; border-bottom: 1px solid #f0f0f0; }
        .file-manager-item:last-child { border-bottom: none; }
        .file-manager-item .file-name { display: flex; align-items: center; gap: 8px; }
        .file-manager-item .file-actions button { margin-left: 5px; padding: 4px 8px; font-size: 12px; }

        .resizer { flex: 0 0 10px; cursor: col-resize; background-color: #e0e0e0; border-left: 1px solid var(--border-color); border-right: 1px solid var(--border-color); display: flex; align-items: center; justify-content: center; z-index: 10; }
        .resizer:hover { background-color: var(--primary-color); opacity: 0.5; }
        .resizer::after { content: '‚ãÆ'; font-size: 1.2em; color: #555; }
        body.is-resizing { cursor: col-resize !important; user-select: none !important; }
        body.is-resizing .editor-pane, body.is-resizing .pdf-pane, body.is-resizing iframe { pointer-events: none; }

        .footer-panel { position: fixed; bottom: 0; left: 0; width: 100%; background-color: #fff; border-top: 1px solid var(--border-color); z-index: 1000; transition: all 0.3s ease-in-out; }
        .footer-handle { height: 40px; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; cursor: pointer; background-color: #f7f7f7; }
        .footer-handle:hover { background-color: #efefef; }
        .footer-handle span { font-weight: bold; color: #555; }
        .footer-handle button { background: none; border: none; font-size: 16px; cursor: pointer; padding: 5px; transition: transform 0.3s; }
        .footer-content { max-height: 0; overflow: hidden; padding: 0 15px; transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out; border-top: 1px solid transparent; }
        .footer-panel.is-open .footer-content { max-height: 200px; overflow-y: auto; padding: 15px; border-top-color: var(--border-color); }
        .footer-panel.is-open .footer-handle button i { transform: rotate(180deg); }
        .helper-group { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }
        .helper-group:last-child { margin-bottom: 0; }
        .helper-group-title { font-size: 14px; font-weight: 500; color: #333; min-width: 100px; }
        .helper-btn { padding: 5px 10px; font-size: 14px; border: 1px solid #ccc; border-radius: 4px; background-color: #f0f0f0; cursor: pointer; transition: all 0.2s; }
        .helper-btn:hover { background-color: var(--primary-color); color: white; border-color: #0056b3; }
    </style>
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-group"><button id="show-help-btn" title="H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng"><i class="fas fa-question-circle"></i></button></div>
        <div class="toolbar-separator"></div>
        <div class="toolbar-group"><button id="file-manager-btn" title="Qu·∫£n l√Ω File"><i class="fas fa-sitemap"></i></button><button id="zip-loader-btn" title="T·∫£i l√™n d·ª± √°n .zip"><i class="fas fa-file-archive"></i></button><input type="file" id="zip-loader-input" accept=".zip" style="display: none;"><button id="download-zip-btn" title="T·∫£i d·ª± √°n v·ªÅ d·∫°ng .zip"><i class="fas fa-download"></i></button></div>
        <div class="toolbar-separator"></div>
        <div class="toolbar-group"><i class="fas fa-key icon-label" title="Ch·ªçn file ch√≠nh ƒë·ªÉ bi√™n d·ªãch"></i><select id="main-file-selector"></select><i class="fas fa-magic icon-label" title="T·∫°o file m·ªõi t·ª´ m·∫´u" style="margin-left: 10px;"></i><select id="template-selector"><option value="">-- M·∫´u --</option><option value="DeThi">ƒê·ªÅ Thi</option><option value="VeHinh">V·∫Ω H√¨nh</option><option value="Beamer">Beamer</option><option value="book">S√°ch</option></select></div>
        <div class="toolbar-separator"></div>
        <div class="toolbar-group"><button id="edit-suggestions-btn" title="S·ª≠a g·ª£i √Ω l·ªánh"><i class="fas fa-pencil-alt"></i></button><button id="clear-cache-btn" title="X√≥a cache"><i class="fas fa-trash-alt"></i></button><button id="open-v2-btn" title="M·ªü Editor V2"><i class="fas fa-external-link-alt"></i></button></div>
        <div class="toolbar-group" style="margin-left: auto;"><button id="compile-btn" disabled><i class="fas fa-spinner fa-spin"></i> Initializing...</button></div>
    </div>
    
    <div class="main-container">
        <div class="editor-pane">
            <div id="editor"></div>
            <div class="controls">
                <div id="console-header" class="console-header"><span>Console Output</span><span id="console-toggle-icon">‚ñº</span></div>
                <pre id="console" class="collapsed">Engine will be ready shortly...</pre>
            </div>
        </div>
        <div class="resizer" id="resizer"></div>
        <div class="pdf-pane"><div id="pdfbox"></div></div>
    </div>

    <div id="loading-overlay"><div class="spinner"></div><span id="loading-text">Compiling...</span></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.15.2/ace.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.15.2/ext-language_tools.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.15.2/ext-fold.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" defer></script>
<script src="PdfTeXEngine.js" defer></script>

<script defer>
function main() {
    const editorEl = ace.edit("editor");
    const compileBtn = document.getElementById("compile-btn");
    const consoleOutput = document.getElementById("console");
    const pdfbox = document.getElementById("pdfbox");
    const zipLoaderInput = document.getElementById('zip-loader-input');
    const mainFileSelector = document.getElementById('main-file-selector');
    const templateSelector = document.getElementById('template-selector');
    const loadingOverlay = document.getElementById('loading-overlay');
    const loadingText = document.getElementById('loading-text');
    const consoleHeader = document.getElementById("console-header");
    const consoleToggleIcon = document.getElementById("console-toggle-icon");
    const clearCacheBtn = document.getElementById('clear-cache-btn');
    const editSuggestionsBtn = document.getElementById('edit-suggestions-btn');
    const openV2Btn = document.getElementById('open-v2-btn');
    const showHelpBtn = document.getElementById('show-help-btn');
    const downloadZipBtn = document.getElementById('download-zip-btn'); 
    const fileManagerBtn = document.getElementById('file-manager-btn');
    const zipLoaderBtn = document.getElementById('zip-loader-btn');

    const globalEn = new PdfTeXEngine();
    let mainTexFile = 'main.tex';
    let currentOpenFile = 'main.tex';
    let db;
    let customSuggestions = [];
    const DB_NAME = 'LaTeX_Perfect_Final_DB';
    const STORE_NAME = 'StyFilesStore';
    const TEXLIVE_BASE_URL = "https://texlive2.swiftlatex.com/pdftex/";
    const TEXLIVE_VERSION = '26';
    const TEMPLATES = { 'DeThi': `...`, 'VeHinh': `...`, 'Beamer': `...`, 'ChuyenDe': `...` }; // N·ªôi dung kh√¥ng ƒë·ªïi
    const PREPACKAGED_FILES = { /* ... */ }; // N·ªôi dung kh√¥ng ƒë·ªïi

    function openDb() { return new Promise((resolve, reject) => { const request = indexedDB.open(DB_NAME, 2); request.onerror = () => reject("Error opening IndexedDB."); request.onsuccess = (event) => { db = event.target.result; resolve(); }; request.onupgradeneeded = (event) => { const db = event.target.result; if (!db.objectStoreNames.contains(STORE_NAME)) { db.createObjectStore(STORE_NAME, { keyPath: 'name' }); } }; }); }
    function saveFileToDb(name, data) { if (!db) return Promise.reject("DB not open"); const transaction = db.transaction([STORE_NAME], 'readwrite'); const store = transaction.objectStore(STORE_NAME); return new Promise((resolve, reject) => { const request = store.put({ name, data }); request.onsuccess = resolve; request.onerror = (e) => reject(`Failed to save ${name}: ${e.target.error}`); }); }
    function getFileFromDb(name) { return new Promise((resolve, reject) => { if (!db) return resolve(null); const transaction = db.transaction([STORE_NAME], 'readonly'); const store = transaction.objectStore(STORE_NAME); const request = store.get(name); request.onsuccess = (event) => resolve(event.target.result ? event.target.result.data : null); request.onerror = (e) => reject(`Failed to get ${name}: ${e.target.error}`); }); }
    function getAllFilesFromDb() { return new Promise((resolve, reject) => { if (!db) return reject("DB not open"); const transaction = db.transaction([STORE_NAME], 'readonly'); const store = transaction.objectStore(STORE_NAME); const request = store.getAll(); request.onsuccess = () => resolve(request.result); request.onerror = () => reject(request.error); }); }
    function deleteFileFromDb(name) { return new Promise((resolve, reject) => { if (!db) return reject("DB not open"); const transaction = db.transaction([STORE_NAME], 'readwrite'); const store = transaction.objectStore(STORE_NAME); const request = store.delete(name); request.onsuccess = () => resolve(); request.onerror = () => reject(request.error); }); }

    function initResizer() {
        const resizer = document.getElementById('resizer');
        const editorPane = document.querySelector('.editor-pane');
        let isResizing = false;
        resizer.addEventListener('mousedown', (e) => {
            e.preventDefault();
            isResizing = true;
            document.body.classList.add('is-resizing');
            const onMouseMove = (moveEvent) => {
                if (!isResizing) return;
                const containerRect = resizer.parentElement.getBoundingClientRect();
                const newEditorWidth = moveEvent.clientX - containerRect.left;
                if (newEditorWidth > 200 && (containerRect.width - newEditorWidth - resizer.offsetWidth) > 200) {
                    editorPane.style.flexBasis = `${newEditorWidth}px`;
                }
            };
            const onMouseUp = () => {
                isResizing = false;
                document.body.classList.remove('is-resizing');
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
                editorEl.resize(true);
            };
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        });
    }

    // ===== START: H√ÄM M·ªöI CHO FOOTER PANEL =====
    function initFooterPanel() {
        const footerPanel = document.getElementById('footer-panel');
        const handle = document.getElementById('footer-handle');
        const content = document.getElementById('footer-content');

        handle.addEventListener('click', (e) => {
            if (e.target.closest('.helper-btn')) return;
            footerPanel.classList.toggle('is-open');
        });

        content.addEventListener('click', (e) => {
            const button = e.target.closest('.helper-btn');
            if (!button) return;

            const textToInsert = button.dataset.insert;
            if (textToInsert) {
                editorEl.insert(textToInsert.replace(/\\n/g, '\n').replace(/\\t/g, '\t'));
                editorEl.focus();
            }
        });
    }
    // ===== END: H√ÄM M·ªöI CHO FOOTER PANEL =====

    async function init() {
        editorEl.setTheme("ace/theme/monokai");
        editorEl.session.setMode("ace/mode/latex");
        editorEl.session.setUseWrapMode(true);
        editorEl.setFontSize(16);
        editorEl.resize(true);
        editorEl.setOptions({ enableBasicAutocompletion: true, enableLiveAutocompletion: true, showFoldWidgets: true });
        editorEl.session.setFoldStyle("markbeginend");
        const langTools = ace.require("ace/ext/language_tools");
        const customCompleter = { getCompletions: (editor, session, pos, prefix, callback) => callback(null, customSuggestions) };
        langTools.addCompleter(customCompleter);

        zipLoaderBtn.addEventListener('click', () => zipLoaderInput.click());
        zipLoaderInput.addEventListener('change', handleZipLoad);
        fileManagerBtn.addEventListener('click', showFileManager);
        mainFileSelector.addEventListener('change', handleMainFileChange);
        templateSelector.addEventListener('change', handleTemplateChange);
        compileBtn.addEventListener('click', compile);
        consoleHeader.addEventListener('click', toggleConsole);
        clearCacheBtn.addEventListener('click', clearStyCache);
        editSuggestionsBtn.addEventListener('click', () => openFileInEditor('suggestions.json'));
        openV2Btn.addEventListener('click', () => window.open('indexV3.html', '_blank'));
        showHelpBtn.addEventListener('click', showHelpModal);
        downloadZipBtn.addEventListener('click', downloadProjectAsZip);

        initResizer(); 
        initFooterPanel(); // G·ªçi h√†m kh·ªüi t·∫°o footer panel (M·ªöI)

        try {
            await openDb();
            await preloadPackagedFiles();
            await loadCustomSuggestions();
            await globalEn.loadEngine();
            await loadCacheIntoEngine();
            updateMainFileSelector();
            const firstMainFile = mainFileSelector.value || 'main.tex';
            await openFileInEditor(firstMainFile);
            compileBtn.innerHTML = '<i class="fas fa-play"></i> Compile';
            compileBtn.disabled = false;
            consoleOutput.innerHTML = "Engine loaded. Ready to compile.";
        } catch (err) {
            console.error(err);
            consoleOutput.innerHTML = `Initialization failed: ${err}`;
            compileBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Error';
        }
    }
    
    // ... (To√†n b·ªô c√°c h√†m kh√°c c·ªßa b·∫°n gi·ªØ nguy√™n kh√¥ng ƒë·ªïi)
    async function openFileInEditor(fileName) { if (!fileName) { editorEl.setValue('Kh√¥ng c√≥ file ƒë·ªÉ m·ªü. Vui l√≤ng t·∫°o file m·ªõi.', -1); currentOpenFile = ''; return; } if (currentOpenFile && editorEl.getValue()) { const currentContent = editorEl.getValue(); const textEncoder = new TextEncoder(); await saveFileToDb(currentOpenFile, textEncoder.encode(currentContent)); globalEn.writeMemFSFile(currentOpenFile, textEncoder.encode(currentContent)); } const fileData = await getFileFromDb(fileName); if (!fileData) { await saveFileToDb(fileName, new Uint8Array()); } const textDecoder = new TextDecoder(); editorEl.setValue(fileData ? textDecoder.decode(fileData) : '', -1); currentOpenFile = fileName; const isMainFile = Array.from(mainFileSelector.options).some(opt => opt.value === fileName); if(isMainFile) { mainTexFile = fileName; } if (fileName.endsWith('.json')) { editorEl.session.setMode("ace/mode/json"); compileBtn.innerHTML = `<i class="fas fa-save"></i> Save Suggestions`; } else { editorEl.session.setMode("ace/mode/latex"); compileBtn.innerHTML = isMainFile ? '<i class="fas fa-play"></i> Compile' : '<i class="fas fa-save"></i> Save File'; } }
    async function compile() { if (currentOpenFile.endsWith('.json')) { const currentContent = editorEl.getValue(); try { JSON.parse(currentContent); const textEncoder = new TextEncoder(); await saveFileToDb(currentOpenFile, textEncoder.encode(currentContent)); await loadCustomSuggestions(); Swal.fire('ƒê√£ l∆∞u!', 'C√°c g·ª£i √Ω l·ªánh ƒë√£ ƒë∆∞·ª£c l∆∞u v√† t·∫£i l·∫°i th√†nh c√¥ng!', 'success'); } catch (e) { Swal.fire({ icon: 'error', title: 'L·ªói c√∫ ph√°p JSON', html: `Vui l√≤ng s·ª≠a l·ªói tr∆∞·ªõc khi l∆∞u:<br><pre style="text-align:left; background-color:#f3f3f3; padding: 5px;">${e.message}</pre>`, }); } return; } if (mainFileSelector.value !== currentOpenFile) { const currentContent = editorEl.getValue(); const textEncoder = new TextEncoder(); await saveFileToDb(currentOpenFile, textEncoder.encode(currentContent)); globalEn.writeMemFSFile(currentOpenFile, textEncoder.encode(currentContent)); Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: `ƒê√£ l∆∞u file ${currentOpenFile}`, showConfirmButton: false, timer: 2000 }); return; } if (!globalEn.isReady()) { console.log("Engine not ready yet"); return; } loadingOverlay.style.display = 'flex'; loadingText.textContent = `ƒêang bi√™n d·ªãch ${mainTexFile}...`; compileBtn.disabled = true; compileBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Compiling...'; const currentContentData = new TextEncoder().encode(editorEl.getValue()); await saveFileToDb(mainTexFile, currentContentData); globalEn.writeMemFSFile(mainTexFile, currentContentData); globalEn.setEngineMainFile(mainTexFile); const r = await globalEn.compileLaTeX(); consoleOutput.innerHTML = r.log || "No log output."; loadingOverlay.style.display = 'none'; compileBtn.disabled = false; compileBtn.innerHTML = '<i class="fas fa-play"></i>Bi√™n D·ªãch'; if (r.status === 0) { const pdfblob = new Blob([r.pdf], { type: 'application/pdf' }); const objectURL = URL.createObjectURL(pdfblob); pdfbox.innerHTML = `<embed src="${objectURL}" width="100%" height="100%" type="application/pdf">`; await parseLogAndCacheDependencies(r.log); } else { pdfbox.innerHTML = `<div style="padding: 20px; color: red;">Bi√™n d·ªãch th·∫•t b·∫°i. Ki·ªÉm tra Console Output.</div>`; } }
    async function updateMainFileSelector() { const allFiles = (await getAllFilesFromDb()).map(f => f.name); const validPrefixes = ['main', 'file', 'de']; mainFileSelector.innerHTML = ''; const filteredTexFiles = allFiles .filter(name => name.endsWith('.tex') && validPrefixes.some(prefix => name.toLowerCase().startsWith(prefix))) .sort(); if (filteredTexFiles.length === 0) { const option = document.createElement('option'); option.textContent = 'Kh√¥ng c√≥ file ch√≠nh'; option.disabled = true; mainFileSelector.appendChild(option); return; } filteredTexFiles.forEach(fileName => { const option = document.createElement('option'); option.value = fileName; option.textContent = fileName; mainFileSelector.appendChild(option); }); if (filteredTexFiles.includes(mainTexFile)) { mainFileSelector.value = mainTexFile; } else { mainTexFile = filteredTexFiles[0] || ''; mainFileSelector.value = mainTexFile; } }
    function handleMainFileChange(event) { mainTexFile = event.target.value; openFileInEditor(mainTexFile); }
    async function handleTemplateChange(event) { const templateKey = event.target.value; if (!templateKey) return; const templateContent = TEMPLATES[templateKey]; const newFileName = `main-${templateKey.toLowerCase()}.tex`; const existingFile = await getFileFromDb(newFileName); if (existingFile) { mainTexFile = newFileName; await openFileInEditor(newFileName); updateMainFileSelector(); Swal.fire({ toast: true, position: 'top-end', icon: 'info', title: `ƒê√£ m·ªü file c√≥ s·∫µn: ${newFileName}`, showConfirmButton: false, timer: 2500 }); } else { const textEncoder = new TextEncoder(); const templateData = textEncoder.encode(templateContent); await saveFileToDb(newFileName, templateData); globalEn.writeMemFSFile(newFileName, templateData); mainTexFile = newFileName; updateMainFileSelector(); await openFileInEditor(newFileName); Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: `ƒê√£ t·∫°o file m·∫´u ${newFileName}`, showConfirmButton: false, timer: 2000 }); } templateSelector.value = templateKey; }
    async function showFileManager() { try { const files = await getAllFilesFromDb(); files.sort((a, b) => a.name.localeCompare(b.name)); const getFileIcon = (fileName) => { if (fileName.endsWith('.tex')) return 'fa-file-code'; if (fileName.endsWith('.sty') || fileName.endsWith('.cls')) return 'fa-file-alt'; if (fileName.endsWith('.json')) return 'fa-file-medical-alt'; if (['.png', '.jpg', '.jpeg', '.gif', '.svg'].some(ext => fileName.endsWith(ext))) return 'fa-file-image'; return 'fa-file'; }; let fileListHtml = files.map(file => `<div class="file-manager-item" data-filename="${file.name}"><div class="file-name"><i class="fas ${getFileIcon(file.name)}"></i><span>${file.name}</span></div><div class="file-actions"><button class="swal2-styled file-open-btn" style="background-color: #007bff;">M·ªü</button><button class="swal2-styled file-delete-btn" style="background-color: #dc3545;">X√≥a</button></div></div>`).join(''); if (files.length === 0) fileListHtml = '<p style="text-align:center; color:#888;">Ch∆∞a c√≥ file n√†o trong d·ª± √°n.</p>'; const managerHTML = `<div class="swal2-content" style="text-align: left;"><div style="display: flex; gap: 10px; margin-bottom: 10px;"><input type="text" id="new-filename-input" class="swal2-input" placeholder="v√≠ d·ª•: chapter2.tex"><button id="add-new-file-btn" class="swal2-confirm swal2-styled">Th√™m file</button></div> <div style="display: flex; gap: 10px; margin-bottom: 20px;"><button id="upload-files-btn-modal" class="swal2-confirm swal2-styled" style="background-color:var(--success-color); width:100%;"><i class="fas fa-upload"></i> T·∫£i l√™n file l·∫ª</button></div><div id="file-manager-container">${fileListHtml}</div>`; Swal.fire({ title: '<strong>Qu·∫£n l√Ω File D·ª± √°n</strong>', html: managerHTML, width: '600px', showConfirmButton: false, showCloseButton: true, didOpen: () => { const fileLoaderInput = document.createElement('input'); fileLoaderInput.type = 'file'; fileLoaderInput.multiple = true; fileLoaderInput.style.display = 'none'; document.body.appendChild(fileLoaderInput); document.getElementById('add-new-file-btn').addEventListener('click', handleAddNewFile); document.getElementById('upload-files-btn-modal').addEventListener('click', () => fileLoaderInput.click()); fileLoaderInput.addEventListener('change', (e) => { handleFileLoad(e); Swal.close(); document.body.removeChild(fileLoaderInput); }); document.getElementById('file-manager-container').addEventListener('click', handleFileAction); } }); } catch (error) { Swal.fire('L·ªói', 'Kh√¥ng th·ªÉ t·∫£i danh s√°ch file t·ª´ database.', 'error'); console.error(error); } }
    async function handleAddNewFile() { const input = document.getElementById('new-filename-input'); const newFileName = input.value.trim(); if (!newFileName || !newFileName.includes('.')) { Swal.showValidationMessage('T√™n file kh√¥ng h·ª£p l·ªá.'); return; } if (await getFileFromDb(newFileName)) { Swal.fire({ toast: true, position: 'top-end', icon: 'error', title: 'File ƒë√£ t·ªìn t·∫°i!', showConfirmButton: false, timer: 2000 }); return; } await saveFileToDb(newFileName, new Uint8Array()); globalEn.writeMemFSFile(newFileName, new Uint8Array()); Swal.close(); showFileManager(); updateMainFileSelector(); Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: `ƒê√£ th√™m file ${newFileName}`, showConfirmButton: false, timer: 2000 }); }
    async function handleFileAction(event) { const target = event.target; const fileItem = target.closest('.file-manager-item'); if (!fileItem) return; const fileName = fileItem.dataset.filename; if (target.classList.contains('file-open-btn')) { await openFileInEditor(fileName); Swal.close(); } else if (target.classList.contains('file-delete-btn')) { Swal.fire({ title: `X√≥a file "${fileName}"?`, text: "H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!", icon: 'warning', showCancelButton: true, confirmButtonColor: '#d33', confirmButtonText: 'V√¢ng, x√≥a n√≥!', cancelButtonText: 'H·ªßy' }).then(async (result) => { if (result.isConfirmed) { await deleteFileFromDb(fileName); if(typeof globalEn.removeMemFSFile === 'function') { globalEn.removeMemFSFile(fileName); } if (currentOpenFile === fileName) { await openFileInEditor(mainTexFile || 'main.tex'); } Swal.close(); showFileManager(); updateMainFileSelector(); Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: 'ƒê√£ x√≥a file!', showConfirmButton: false, timer: 2000 }); } }); } }
    async function handleFileLoad(event) { const files = event.target.files; if (!files.length) return; const promises = Array.from(files).map(file => { return new Promise((resolve, reject) => { const reader = new FileReader(); reader.onload = async (e) => { const fileData = new Uint8Array(e.target.result); await saveFileToDb(file.name, fileData); globalEn.writeMemFSFile(file.name, fileData); resolve(); }; reader.onerror = reject; reader.readAsArrayBuffer(file); }); }); await Promise.all(promises); Swal.fire('Th√†nh c√¥ng', `${files.length} file ƒë√£ ƒë∆∞·ª£c t·∫£i l√™n v√† l∆∞u l·∫°i.`, 'success'); updateMainFileSelector(); if (typeof showFileManager === 'function') showFileManager(); event.target.value = ''; }
    // T√åM V√Ä THAY TH·∫æ TO√ÄN B·ªò H√ÄM handleZipLoad B·∫∞NG H√ÄM N√ÄY

async function handleZipLoad(event) {
    const file = event.target.files[0];
    if (!file) return;
    loadingOverlay.style.display = 'flex';
    loadingText.textContent = 'ƒêang gi·∫£i n√©n v√† x·ª≠ l√Ω file...';

    try {
        const zip = await JSZip.loadAsync(file);

        // --- LOGIC M·ªöI B·∫ÆT ƒê·∫¶U T·ª™ ƒê√ÇY ---

        // 1. L·ªçc b·ªè c√°c th∆∞ m·ª•c v√† c√°c file h·ªá th·ªëng kh√¥ng mong mu·ªën
        const fileEntries = Object.values(zip.files).filter(entry =>
            !entry.dir && // B·ªè qua c√°c th∆∞ m·ª•c
            !entry.name.startsWith('__MACOSX/') && // B·ªè qua th∆∞ m·ª•c r√°c c·ªßa Mac
            !entry.name.endsWith('/.DS_Store') && // B·ªè qua file r√°c c·ªßa Mac
            !entry.name.endsWith('.DS_Store')
        );

        if (fileEntries.length === 0) {
            loadingOverlay.style.display = 'none';
            Swal.fire('T·ªáp ZIP tr·ªëng', 'Kh√¥ng t√¨m th·∫•y t·ªáp h·ª£p l·ªá n√†o ƒë·ªÉ import.', 'warning');
            return;
        }

        // 2. X√°c ƒë·ªãnh ƒë∆∞·ªùng d·∫´n th∆∞ m·ª•c g·ªëc chung (n·∫øu c√≥)
        let commonPath = '';
        const firstPath = fileEntries[0].name;
        const firstSlashIndex = firstPath.indexOf('/');

        // N·∫øu file ƒë·∫ßu ti√™n n·∫±m trong m·ªôt th∆∞ m·ª•c
        if (firstSlashIndex > -1) {
            const potentialRoot = firstPath.substring(0, firstSlashIndex + 1);
            // Ki·ªÉm tra xem t·∫•t c·∫£ c√°c file kh√°c c√≥ c√πng th∆∞ m·ª•c g·ªëc ƒë√≥ kh√¥ng
            if (fileEntries.every(entry => entry.name.startsWith(potentialRoot))) {
                commonPath = potentialRoot;
                console.log(`[ZIP Loader] Ph√°t hi·ªán v√† s·∫Ω lo·∫°i b·ªè th∆∞ m·ª•c g·ªëc chung: "${commonPath}"`);
            }
        }

        // 3. X·ª≠ l√Ω v√† ghi file v·ªõi t√™n ƒë√£ ƒë∆∞·ª£c chu·∫©n h√≥a
        const promises = fileEntries.map(zipEntry => {
            return zipEntry.async('uint8array').then(async (content) => {
                // C·∫Øt b·ªè ph·∫ßn ƒë∆∞·ªùng d·∫´n g·ªëc chung kh·ªèi t√™n file
                const finalFileName = zipEntry.name.substring(commonPath.length);

                if (finalFileName) { // ƒê·∫£m b·∫£o t√™n file kh√¥ng r·ªóng
                    await saveFileToDb(finalFileName, content);
                    globalEn.writeMemFSFile(finalFileName, content);
                }
            });
        });

        // --- LOGIC M·ªöI K·∫æT TH√öC T·∫†I ƒê√ÇY ---

        await Promise.all(promises);
        Swal.fire('Th√†nh c√¥ng!', `${promises.length} file t·ª´ ${file.name} ƒë√£ ƒë∆∞·ª£c gi·∫£i n√©n v√† l∆∞u l·∫°i!`, 'success');
        updateMainFileSelector();

    } catch (error) {
        console.error("Error processing zip file:", error);
        Swal.fire('L·ªói', 'Kh√¥ng th·ªÉ x·ª≠ l√Ω file zip. Vui l√≤ng ki·ªÉm tra file v√† th·ª≠ l·∫°i.', 'error');
    } finally {
        loadingOverlay.style.display = 'none';
        loadingText.textContent = 'Compiling...';
        event.target.value = ''; // Reset input ƒë·ªÉ c√≥ th·ªÉ t·∫£i l·∫°i c√πng file
    }
}
    async function downloadProjectAsZip() { if (!db) { Swal.fire('L·ªói', 'Database kh√¥ng kh·∫£ d·ª•ng.', 'error'); return; } loadingOverlay.style.display = 'flex'; loadingText.textContent = 'ƒêang n√©n d·ª± √°n...'; try { const files = await getAllFilesFromDb(); if (files.length === 0) { Swal.fire('Th√¥ng b√°o', 'Kh√¥ng c√≥ file n√†o ƒë·ªÉ t·∫£i v·ªÅ.', 'info'); return; } const zip = new JSZip(); files.forEach(file => zip.file(file.name, file.data)); const blob = await zip.generateAsync({ type: 'blob' }); const link = document.createElement('a'); link.href = URL.createObjectURL(blob); const date = new Date().toISOString().slice(0, 10); link.download = `latex-project-${date}.zip`; document.body.appendChild(link); link.click(); document.body.removeChild(link); URL.revokeObjectURL(link.href); } catch (error) { console.error("Error creating zip file:", error); Swal.fire('L·ªói', 'Kh√¥ng th·ªÉ t·∫°o file zip.', 'error'); } finally { loadingOverlay.style.display = 'none'; loadingText.textContent = 'Compiling...'; } }
    function clearStyCache() { if (!db) { Swal.fire('L·ªói', 'Database kh√¥ng kh·∫£ d·ª•ng.', 'error'); return; } Swal.fire({ title: 'B·∫°n ch·∫Øc ch·∫Øn?', html: "H√†nh ƒë·ªông n√†y s·∫Ω <b>x√≥a t·∫•t c·∫£ c√°c file ƒë√£ cache</b> (g√≥i .sty, .cls...).<br>H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c v√† s·∫Ω t·∫£i l·∫°i trang.", icon: 'warning', showCancelButton: true, confirmButtonColor: '#d33', cancelButtonColor: '#3085d6', confirmButtonText: 'V√¢ng, x√≥a h·∫øt!', cancelButtonText: 'H·ªßy' }).then((result) => { if (result.isConfirmed) { db.transaction([STORE_NAME], 'readwrite').objectStore(STORE_NAME).clear().onsuccess = () => Swal.fire('ƒê√£ x√≥a!', 'Cache ƒë√£ ƒë∆∞·ª£c d·ªçn d·∫πp. Trang s·∫Ω t·∫£i l·∫°i.', 'success').then(() => location.reload()); } }); }
    function showHelpModal() { const helpHTML = ` <div style="padding: 10px;"> <h2>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Tr√¨nh so·∫°n th·∫£o LaTeX tr√™n Web!</h2> <p>ƒê√¢y l√† m·ªôt m√¥i tr∆∞·ªùng m·∫°nh m·∫Ω ƒë·ªÉ so·∫°n th·∫£o v√† bi√™n d·ªãch t√†i li·ªáu LaTeX ngay tr√™n tr√¨nh duy·ªát c·ªßa b·∫°n.</p> <h3><i class="fas fa-tools"></i> Ch·ª©c NƒÉng Ch√≠nh</h3> <ul> <li><i class="fas fa-sitemap"></i><b> Qu·∫£n l√Ω File:</b> Trung t√¢m ƒë·ªÉ <b>th√™m file m·ªõi</b>, x√≥a, m·ªü v√† t·∫£i l√™n file l·∫ª cho d·ª± √°n.</li> <li><i class="fas fa-file-archive"></i><b> T·∫£i l√™n .zip:</b> T·∫£i l√™n v√† gi·∫£i n√©n to√†n b·ªô d·ª± √°n t·ª´ file .zip.</li><li><i class="fas fa-download"></i><b> T·∫£i v·ªÅ .zip:</b> T·∫£i to√†n b·ªô d·ª± √°n hi·ªán t·∫°i v·ªÅ m√°y.</li> <li><i class="fas fa-key"></i><b> File ch√≠nh:</b> Ch·ªçn file <code>.tex</code> ch√≠nh ƒë·ªÉ bi√™n d·ªãch. <br><small>L∆∞u √Ω: Ch·ªâ c√°c file c√≥ t√™n b·∫Øt ƒë·∫ßu b·∫±ng <code>main...</code>, <code>de...</code>, ho·∫∑c <code>file...</code> m·ªõi xu·∫•t hi·ªán ·ªü ƒë√¢y.</small></li> <li><i class="fas fa-magic"></i><b> M·∫´u:</b> Nhanh ch√≥ng t·∫°o m·ªôt file .tex m·ªõi t·ª´ c√°c m·∫´u c√≥ s·∫µn.</li> </ul> <h3><i class="fas fa-magic"></i> T√≠nh NƒÉng "Ma Thu·∫≠t"</h3> <ul> <li><b>L∆∞u tr·ªØ b·ªÅn v·ªØng:</b> T·∫•t c·∫£ c√°c file ƒë∆∞·ª£c l∆∞u trong tr√¨nh duy·ªát. B·∫°n c√≥ th·ªÉ ƒë√≥ng tab v√† m·ªü l·∫°i m√† kh√¥ng m·∫•t d·ªØ li·ªáu.</li> <li><b>T·ª± ƒë·ªông t·∫£i g√≥i:</b> Khi bi√™n d·ªãch, tr√¨nh so·∫°n th·∫£o s·∫Ω t·ª± ƒë·ªông t·∫£i c√°c g√≥i c√≤n thi·∫øu t·ª´ kho TeX Live.</li> <li><b>Code Folding:</b> Thu g·ªçn c√°c kh·ªëi l·ªánh (v√≠ d·ª•: <code>\\begin{...}</code>) b·∫±ng c√°ch nh·∫•n v√†o c√°c m≈©i t√™n b√™n c·∫°nh s·ªë d√≤ng.</li> </ul> </div> `; Swal.fire({ title: '<strong>H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</strong>', icon: 'info', html: helpHTML, showCloseButton: true, focusConfirm: false, width: '800px', confirmButtonText: '<i class="fa fa-thumbs-up"></i> ƒê√£ hi·ªÉu!', confirmButtonAriaLabel: 'Thumbs up, great!', }); }
    async function preloadPackagedFiles() { const textEncoder = new TextEncoder(); for (const fileName in PREPACKAGED_FILES) { if (!(await getFileFromDb(fileName))) { await saveFileToDb(fileName, textEncoder.encode(PREPACKAGED_FILES[fileName])); } } }
    async function loadCacheIntoEngine() { const files = await getAllFilesFromDb(); files.forEach(file => globalEn.writeMemFSFile(file.name, file.data)); }
    async function loadCustomSuggestions() { const fileData = await getFileFromDb('suggestions.json'); if (fileData) { try { customSuggestions = JSON.parse(new TextDecoder().decode(fileData)); } catch(e) { console.error('Failed to parse suggestions.json:', e); customSuggestions = []; } } }
    async function parseLogAndCacheDependencies(logContent) { const fileRegex = /\(([^)\s]+\.(?:cls|sty|def|clo|ldf|cfg|tex))\s?/g; let match; const dependencies = new Set(); while ((match = fileRegex.exec(logContent)) !== null) { dependencies.add(match[1].split('/').pop()); } for (const fileName of dependencies) { if (await getFileFromDb(fileName)) continue; try { const response = await fetch(`${TEXLIVE_BASE_URL}${TEXLIVE_VERSION}/${fileName}`); if (response.ok) { const fileData = await response.arrayBuffer(); await saveFileToDb(fileName, new Uint8Array(fileData)); globalEn.writeMemFSFile(fileName, new Uint8Array(fileData)); console.log(`[Cache SAVE] ${fileName}`); } } catch (error) { console.error(`Error fetching ${fileName}:`, error); } } }
    function toggleConsole() { consoleOutput.classList.toggle('collapsed'); consoleToggleIcon.textContent = consoleOutput.classList.contains('collapsed') ? '‚ñº' : '‚ñ≤'; }

    init();
}

if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', main); } else { main(); }
</script>

<!-- Thanh c√¥ng c·ª• h·ªó tr·ª£ d∆∞·ªõi c√πng (M·ªöI) -->
<div class="footer-panel" id="footer-panel">
    <div class="footer-handle" id="footer-handle">
        <span><i class="fas fa-tools"></i> C√¥ng c·ª• h·ªó tr·ª£</span>
        <button id="expand-footer-btn" title="M·ªü r·ªông/Thu g·ªçn"><i class="fas fa-chevron-up"></i></button>
    </div>
    <div class="footer-content" id="footer-content">
        <!-- H√†ng 2: M√¥i tr∆∞·ªùng -->
        <div class="helper-group">
            <span class="helper-group-title">M√¥i tr∆∞·ªùng:</span>
            <button class="helper-btn" data-insert="\begin{itemize}\n\t\item \n\end{itemize}">Itemize</button>
            <button class="helper-btn" data-insert="\begin{enumerate}\n\t\item \n\end{enumerate}">Enumerate</button>
            <button class="helper-btn" data-insert="\begin{figure}\n\t\centering\n\t\n\t\caption{}\n\t\label{fig:}\n\end{figure}">Figure</button>
            <button class="helper-btn" data-insert="\begin{table}\n\t\centering\n\t\caption{}\n\t\label{tab:}\n\t\begin{tabular}{cc}\n\t\t\n\t\end{tabular}\n\end{table}">Table</button>
            <button class="helper-btn" data-insert="\begin{minipage}{0.48\textwidth}\n\t\n\end{minipage}">Minipage</button>
            <button class="helper-btn" data-insert="\begin{center}\n\t\n\end{center}">Center</button>
            <button class="helper-btn" data-insert="\begin{tikzpicture}\n\t\n\end{tikzpicture}">TikZ</button>
            <button class="helper-btn" data-insert="\begin{tabular}{|c|c|}\n\t\hline\n\t & \\\n\t\hline\n\t & \\\n\t\hline\n\end{tabular}">Tabular</button>
            <button class="helper-btn" data-insert="\begin{longtable}{|c|c|}\n\t\hline\n\t\endfirsthead\n\t\hline\n\t\endhead\n\t\hline\n\t\endfoot\n\t\hline\n\t\endlastfoot\n\t & \\\n\t\hline\n\end{longtable}">Longtable</button>
            <button class="helper-btn" data-insert="\begin{table}[htbp]\n\t\centering\n\t\caption{}\n\t\label{tab:}\n\t\begin{tabular}{|c|c|}\n\t\t\hline\n\t\t & \\\n\t\t\hline\n\t\t & \\\n\t\t\hline\n\t\end{tabular}\n\end{table}">Table+Tabular</button>
            <button class="helper-btn" data-insert="\begin{tikzpicture}\n\t\n\end{tikzpicture}">TikZ</button>
            <button class="helper-btn" data-insert="\begin{tikzpicture}[scale=1]\n\t\draw[help lines] (-2,-2) grid (2,2);\n\t\draw[->] (-2,0) -- (2,0) node[right] {$x$};\n\t\draw[->] (0,-2) -- (0,2) node[above] {$y$};\n\end{tikzpicture}">TikZ Grid</button>
            
        </div>
        <!-- H√†ng 3: To√°n h·ªçc -->
        <div class="helper-group">
            <span class="helper-group-title">To√°n h·ªçc:</span>
            <button class="helper-btn" data-insert="\dfrac{}{}">\dfrac</button>
            <button class="helper-btn" data-insert="\sqrt{}">\sqrt</button>
            <button class="helper-btn" data-insert="\sqrt[n]{}">\sqrt[n]{}</button>
            <button class="helper-btn" data-insert="\sum\limits_{}^{}">‚àë</button>
            <button class="helper-btn" data-insert="\displaystyle\int\limits_{}^{}">‚à´</button>
            <button class="helper-btn" data-insert="\lim\limits_{x\to\infty}">lim</button>
            <button class="helper-btn" data-insert="\infty">‚àû</button>
            <button class="helper-btn" data-insert="\pm">¬±</button>
            <button class="helper-btn" data-insert="\mp">‚àì</button>
            <button class="helper-btn" data-insert="\div">√∑</button>
            <button class="helper-btn" data-insert="\leq">‚â§</button>
            <button class="helper-btn" data-insert="\geq">‚â•</button>
            <button class="helper-btn" data-insert="\neq">‚â†</button>
            <button class="helper-btn" data-insert="\approx">‚âà</button>
            <button class="helper-btn" data-insert="\equiv">‚â°</button>
            <button class="helper-btn" data-insert="\in">‚àà</button>
            <button class="helper-btn" data-insert="\notin">‚àâ</button>
            <button class="helper-btn" data-insert="\subset">‚äÇ</button>
            <button class="helper-btn" data-insert="\supset">‚äÉ</button>
            <button class="helper-btn" data-insert="\cup">‚à™</button>
            <button class="helper-btn" data-insert="\cap">‚à©</button>
            <button class="helper-btn" data-insert="\forall">‚àÄ</button>
            <button class="helper-btn" data-insert="\exists">‚àÉ</button>
            <button class="helper-btn" data-insert="\nexists">‚àÑ</button>
            <button class="helper-btn" data-insert="\Rightarrow">‚áí</button>
            <button class="helper-btn" data-insert="\Leftarrow">‚áê</button>
        </div>
        <div class="helper-group">
            <span class="helper-group-title">K√Ω Hi·ªáu:</span>
            <button class="helper-btn" data-insert="\mathrm{C}_{n}^{k}">C(n,k)</button>
            <button class="helper-btn" data-insert="\mathrm{A}_{n}^{k}">A(n,k)</button>
            <button class="helper-btn" data-insert="\mathrm{P}(A)">P(A)</button>
            <button class="helper-btn" data-insert="\overline{x}">xÃÑ</button>
            <button class="helper-btn" data-insert="\widehat{x}">xÃÇ</button>
            <button class="helper-btn" data-insert="\tilde{x}">xÃÉ</button>
            <button class="helper-btn" data-insert="\widetilde{x}">xÃÉ</button>
            <button class="helper-btn" data-insert="\overrightarrow{x}">x‚Éó</button>
            <button class="helper-btn" data-insert="\dot{x}">·∫ã</button>
            <button class="helper-btn" data-insert="\ddot{x}">·∫ç</button>
            <button class="helper-btn" data-insert="\mathbb{R}">‚Ñù</button>
            <button class="helper-btn" data-insert="\mathbb{N}">‚Ñï</button>
            <button class="helper-btn" data-insert="\mathbb{Z}">‚Ñ§</button>
            <button class="helper-btn" data-insert="\mathbb{Q}">‚Ñö</button>
            <button class="helper-btn" data-insert="\mathcal{D}">ùíü</button>
            <button class="helper-btn" data-insert="\alpha">Œ±</button>
            <button class="helper-btn" data-insert="\beta">Œ≤</button>
            <button class="helper-btn" data-insert="\gamma">Œ≥</button>
            <button class="helper-btn" data-insert="\Delta">Œî</button>
            <button class="helper-btn" data-insert="\epsilon">Œµ</button>
            <button class="helper-btn" data-insert="\pi">œÄ</button>
            <button class="helper-btn" data-insert="\Omega">Œ©</button>
            <button class="helper-btn" data-insert="\phi">œÜ</button>
        </div>
    </div>
</div>


</body>
</html>